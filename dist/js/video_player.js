function initMovies(){var e;$.getJSON("src/omdb_id.json").then(function(o){moviesArray=o.movies,e=randomMovies(45),displayDescriptionBox(moviesArray[e],"JSON"),displayVideoBoxes(moviesArray)})}function randomMovies(e){return Math.floor(Math.random()*e)}function searchMovie(e,o){var t,i;return"ID"===e?i="?i=":"Title"===e&&(i="?t="),requestURl="https://www.omdbapi.com/"+i+o+"&apikey=3a2d81a4",$.ajax({url:requestURl,type:"GET",dataType:"json",async:!1,success:function(e){t=e}}),t}function displayDescriptionBox(e,o){var t;"JSON"===o?t=searchMovie("ID",e.id):"OMDB"===o&&(t=searchMovie("ID",e.imdbID)),$(".filmTitle").text(t.Title),$(".filmDescriptionP1").text(t.Plot.slice(0,100)),$(".filmDescriptionP2").text(t.Plot.slice(100,t.Plot.length)),$(".filmGenre").text(t.Genre),$(".filmDirector").text(t.Director),$(".filmWriter").text(t.Writer),$(".filmActors").text(t.Actors),$(".filmAwards").text(t.Awards),$(".filmRating").text(t.imdbRating),$(".filmYear").text(t.Year),$(".filmRuntime").text(t.Runtime),$(".filmPoster").attr("src",t.Poster),$(".btnWatchVideo").attr("data-video-id","_KJHRF6RlTQ"),$(".btnShowIMDB").attr("data-url","http://www.imdb.com/title/"+t.imdbID+"/"),$("#videoBackground").attr("poster",t.Poster)}function displayVideoBoxes(e){var o,t;for(i=0;i<e.length;i++)o="",o+='<div class="videoBox" data-video-id="4IM1XhTxPAE">',o+='<img src="'+(t=searchMovie("ID",e[i].id)).Poster+'">',o+='<i class="fa fa-play-circle"></i>',o+="<p>"+t.Title+"</p>",o+="</div>",$(".videoBoxes").append(o);setVideoRows(4)}function menuSearchDisplay(e){"show"==e?(smallBox.style.display="none",expandedBox.style.display="block",menuSearch.classList.add("mouseSearchClick")):"hide"==e&&(smallBox.style.display="block",expandedBox.style.display="none",menuSearch.classList.remove("mouseSearchClick")),expandedBox.value="Wpisz film"}function searchInput(e){displayDescriptionBox(searchMovie("Title",e),"OMDB")}function openVideoModal(e){modal.addClass("modalOpen"),$("#modalVideo").find("source").attr("src","https://www.youtube.com/watch?v="+e)}function playVideoInModal(){(player=videojs("modalVideo")).ready(function(){player.currentTime(5),player.volume(.5),player.play()}),player.on("ended",function(){modal.removeClass("modalOpen")})}function eventListenerVideoBox(){menuSearch.addEventListener("click",function(){expandedBox.value=""}),menuSearch.addEventListener("mouseenter",function(){menuSearchDisplay("show")}),menuSearch.addEventListener("mouseleave",function(){menuSearchDisplay("hide")}),menuSearch.addEventListener("keyup",function(e){13==(e.which||e.keyCode)&&(scrollViewTo("#heroImage"),hamburgerMenu(),searchInput(expandedBox.value),menuSearchDisplay("hide"))}),btnShowIMDB.addEventListener("click",function(){window.open($(".btnShowIMDB").attr("data-url"))}),btnWatchVideo.addEventListener("click",function(){openVideoModal($(".btnWatchVideo").attr("data-video-id")),playVideoInModal()}),window.addEventListener("keydown",function(e){27==(e.which||e.keyCode)&&(modal.removeClass("modalOpen"),player.pause()),32==(e.which||e.keyCode)&&(!0===player.paused()?player.play():player.pause(),e.preventDefault())}),closeModal.addEventListener("click",function(){modal.removeClass("modalOpen"),player.pause()}),videoContainer.addEventListener("click",function(e){var o=e.target.parentNode;"videoBox"==o.className?(openVideoModal(o.getAttribute("data-video-id")),playVideoInModal()):console.log("poza")})}var btnWatchVideo=document.querySelector(".btnWatchVideo"),btnShowIMDB=document.querySelector(".btnShowIMDB"),menuSearch=document.querySelector(".menuSearch"),expandedBox=document.querySelector(".expandedBox"),smallBox=document.querySelector(".smallBox"),closeModal=document.querySelector(".fa-window-close-o"),videoContainer=document.querySelector("#videoSection .videoBoxes"),modal=$(".modalBackground"),player;initMovies(),eventListenerVideoBox();