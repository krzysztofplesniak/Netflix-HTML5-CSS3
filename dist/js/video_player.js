window.addEventListener("load",function(){function e(e){var t=new Object;return $.ajax({url:"https://www.omdbapi.com/?i="+e+"&apikey=3a2d81a4",type:"GET",dataType:"json",async:!1,success:function(e){t.Title=e.Title,t.DescriptionPart1=e.Plot,t.Director=e.Director,t.Genre=e.Genre,t.Year=e.Year,t.Runtime=e.Runtime,t.Poster=e.Poster,t.Writer=e.Writer,t.Actors=e.Actors,t.Awards=e.Awards,t.Rating=e.imdbRating}}),t}function t(e){var t=new Object;return $.ajax({url:"https://www.omdbapi.com/?s="+e+"&apikey=3a2d81a4",type:"GET",dataType:"json",async:!1,success:function(e){var i=e.Search[0];console.log("film tytuł",i),t.Title=i.Title,t.DescriptionPart1=i.Plot,t.Director=i.Director,t.Genre=i.Genre,t.Year=i.Year,t.Runtime=i.Runtime,t.Poster=i.Poster,t.Writer=i.Writer,t.Actors=i.Actors,t.Awards=i.Awards,t.Rating=i.imdbRating}}),t}function r(t){var i=e(t.id);$(".filmTitle").text(i.Title),$(".filmDescriptionP1").text(i.DescriptionPart1),$(".filmDescriptionP2").text(i.DescriptionPart2),$(".filmGenre").text(i.Genre),$(".filmDirector").text(i.Director),$(".filmYear").text(i.Year),$(".filmRuntime").text(i.Runtime),$(".filmWriter").text(i.Writer),$(".filmActors").text(i.Actors),$(".filmAwards").text(i.Awards),$(".filmRating").text(i.Rating),$(".filmPoster").attr("src",i.Poster),$("#readAboutFilm").attr("href","http://www.imdb.com/title/"+t.id+"/"),$("#videoBackground").attr("poster",i.Poster),$("#videoBackground").children().attr("src",t.url)}function n(t){var r,n;for(i=0;i<t.length;i++)r="",r+='<div class="videoBox">',r+='<img src="'+(n=e(t[i].id)).Poster+'">',r+='<i class="fa fa-play-circle"></i>',r+="<p>"+n.Title+"</p>",r+="</div>",$(".videoBoxes").append(r)}function o(e){return e[Math.floor(20*Math.random())]}function a(e){console.log(e)}function s(){var e,i;l.addEventListener("mousedown",function(r){d.value="",l.addEventListener("keyup",function(r){13!=r.which&&13!=r.keyCode||(i=d.value,console.log("wpisany film to ",i),e=t(i))})})}var c=document.querySelector(".btnWatchVideo"),l=document.querySelector(".menuSearch"),d=document.querySelector(".expandedBox"),u=document.querySelector(".smallBox");!function(){var e;$.getJSON("src/omdb_id.json").then(function(t){r(e=o(t.movies)),n(t.movies)})}(),function(){c.addEventListener("click",function(){a("URL")}),l.addEventListener("mouseenter",function(){u.style.display="none",d.style.display="block",l.classList.add("mouseenter"),s()}),l.addEventListener("mouseleave",function(){u.style.display="block",d.style.display="none",l.classList.remove("mouseenter"),d.value="Wpisz ponownie tytuł filmu"})}()});